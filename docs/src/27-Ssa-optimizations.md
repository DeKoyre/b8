## Построение Ssa формы по графу потока управления

### Теоретическая сводка:
**Определение**
SSA (англ. Static single assignment form) — промежуточное представление, используемое компиляторами, в котором каждой переменной значение 
присваивается лишь единожды. Переменные исходной программы разбиваются на версии, обычно с помощью добавления суффикса, таким образом, 
что каждое присваивание осуществляется уникальной версии переменной. В SSA-представлении DU-цепи (англ. def-use) заданы явно и содержат 
единственный элемент.

**Определение** Фи-функция для некоторой переменной – это операция, выбирающая среди множества значений переменной нужное.

Фи-функции реализованы цепочками присваиваний в трехадресном коде: в начале базового блока объявляется присваивание некоторой переменной v:
```csharp
v = phi1
```
Затем идут значения фи функций, описывающие какое значение примет переменная, опираясь на ветке графа из которой перешло управление: 
```csharp
phi1 = v1 if went from label1
phi1 = v2 if went from label2
phi1 = 5 if went from label3
```

### Построение SSA формы
Осуществляется в два этапа:
1). Фи-функции в вышеописанной форме расставляются во все блоки, в которые входит больше одной дуги управляющего графа
2). Осуществляется переименование переменных за счет стеков, содержащих порядковый номер для каждой последующей переменной
<img src="https://github.com/AvakGor/temp/blob/master/alg1.png" alt="">

## Оптимизации по ssa форме
**Распространение констант:** 
1). Фи-функции вида: 
```csharp
v = phi1 
phi1 = 3 if went form label1 
phi1 = 3 if went from label2 
заменяется на v = 3. 
```
2). Все определяемые константы протягиваются по графу 
3). В случае бинарных операций с константами, выполняется свертка констант

<img src="https://github.com/AvakGor/temp/blob/master/opt1.JPG" alt="">

**Распространение копий:**
1). Фи-функции вида: 
```csharp
V = phi1 
Phi1 = a if went from label1 
Phi1 =a if went from label2 
```
Заменяются на v = a 
2). Все определяемые переменные протягиваются по графу 

<img src="https://github.com/AvakGor/temp/blob/master/opt2.JPG" alt="">
